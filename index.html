<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Tom Beatty - Carmel, Indiana</title>
        <meta name="description" content="Tom Beatty lives in Carmel, Indiana, works at Case Design/Remodeling, and enjoys playing tennis.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/i.css">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <header>
          <h1 class="name">Tom Beatty</h1>

          <img class="profile" src="img/profile.jpg" alt="Tom Beatty">
        </header>

        <dl class="icon-list">
          <dt class="icon icon-location">Lives</dt>
          <dd class="icon-d">Carmel, Indiana</dd>

          <dt class="icon icon-work">Works</dt>
          <dd class="icon-d">
            <a href="http://www.caseindy.com/">Case Design/Remodeling</a>
          </dd>

          <dt class="icon icon-like">Likes</dt>
          <dd class="icon-d">Family, Tennis, and Euchre</dd>
        </dl>

        <button class="btn btn--full btn--blue js-show-email">Email</button>
        <a class="btn btn--full" href="http://www.linkedin.com/pub/tom-beatty/79/3a0/652">LinkedIn</a>

        <form class="js-email-form fake-modal">
          <label for="from">From</label>
          <input id="from" name="from" type="email" placeholder="Your email address" />

          <label for="note">Note</label>
          <textarea id="note" name="note" placeholder="Your message"></textarea>

          <button class="btn btn--full btn--blue js-send-email" type="submit">Send</button>
          <button class="btn btn--s js-hide-email" type="reset">&larr;</button>
        </form>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-52539192-1', 'auto');
          ga('send', 'pageview');

          $(function() {
            $form = $('.js-email-form');
            $('.js-show-email').click(function() {
              $form.fadeIn();
            });

            $('.js-hide-email').click(function() {
              $form.fadeOut();
            })

            $form.submit(function(e) {
              e.preventDefault();

              data = {};
              expectedFields = 2;
              $form.find(':input').each(function(i, field) {
                if (field.id && field.value != '') {
                  data[field.id] = field.value;
                }
              });

              if (Object.keys(data).length != expectedFields) {
                alert('Please enter your email address and note before sending');
                return false;
              }

              $btn = $form.find('.js-send-email');
              $btn.attr('disabled', true).text('Sending...');

              $.ajax({
                url: '/',
                type: 'POST',
                data: data,
                success: function (data, textStatus, jqXHR) {
                  $btn.text(data);
                  setTimeout(function() {
                    $form[0].reset();
                    $form.fadeOut(function() {
                      $btn.text('Send');
                    });
                  }, 600);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                  alert(textStatus);
                }
              }).always(function() {
                $btn.attr('disabled', false);
              });

            });
          });
        </script>
    </body>
</html>
